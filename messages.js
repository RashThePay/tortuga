const TEAM_NAMES = {
  english: 'ðŸ‡¬ðŸ‡§ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ',
  french: 'ðŸ‡«ðŸ‡· ÙØ±Ø§Ù†Ø³ÙˆÛŒ',
  dutch: 'ðŸ‡³ðŸ‡± Ù‡Ù„Ù†Ø¯ÛŒ',
  spanish: 'ðŸ‡ªðŸ‡¸ Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ÛŒÛŒ',
};

const LOCATION_NAMES = {
  flyingDutchman: 'ðŸ´â€â˜ ï¸ ÙÙ„Ø§ÛŒÙ†Ú¯ Ø¯Ø§Ú†Ù…Ù†',
  jollyRoger: 'â˜  Ø¬Ø§Ù„ÛŒ Ø±Ø§Ø¬Ø±',
  island: 'ðŸï¸ Ø¬Ø²ÛŒØ±Ù‡',
  rowboat: 'ðŸ›¶ Ù‚Ø§ÛŒÙ‚',
};

const SHIP_SHORT = {
  fd: 'flyingDutchman',
  jr: 'jollyRoger',
  island: 'island',
};

function playerName(p) {
  return `[â€${p.name}](tg://user?id=${p.id})`;
}

function shipLabel(loc) {
  return LOCATION_NAMES[loc] || loc;
}

const msg = {
  newGameMode: 'ðŸ´â€â˜ ï¸ Ø­Ø§Ù„Øª Ø¨Ø§Ø²ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:',
  newGame: (mist = false) => 
    `ðŸ´â€â˜ ï¸ *Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¬Ø²ÛŒØ±Ù‡â€ŒÛŒ Ú¯Ù†Ø¬!*${mist ? ' ðŸŒ«ï¸ Ù…Ù‡â€ŒÚ¯Ø±ÙØªÚ¯ÛŒ' : ''}\nØ¨Ø±Ø§ÛŒ Ù¾ÛŒÙˆØ³ØªÙ† /join Ø¨Ø²Ù†ÛŒØ¯.\nØ¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ /start Ø¨Ø²Ù†ÛŒØ¯.`,
  alreadyRunning: 'âš ï¸ ÛŒÚ© Ø¨Ø§Ø²ÛŒ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§Ø³Øª.',
  noGame: 'âš ï¸ Ù‡ÛŒÚ† Ø¨Ø§Ø²ÛŒâ€ŒØ§ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯. Ø¨Ø§ /newgame Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø³Ø§Ø²ÛŒØ¯.',
  joined: (name) => `âœ… â€${name} Ø¨Ù‡ Ø¨Ø§Ø²ÛŒ Ù¾ÛŒÙˆØ³Øª!`,
  left: (name) => `ðŸ‘‹ â€${name} Ø§Ø² Ø¨Ø§Ø²ÛŒ Ø®Ø§Ø±Ø¬ Ø´Ø¯.`,
  alreadyJoined: 'âš ï¸ Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø¨Ù‡ Ø¨Ø§Ø²ÛŒ Ù¾ÛŒÙˆØ³ØªÙ‡â€ŒØ§ÛŒØ¯.',
  notInGame: 'âš ï¸ Ø´Ù…Ø§ Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒ Ù†ÛŒØ³ØªÛŒØ¯.',
  needMorePlayers: 'âš ï¸ Ø­Ø¯Ø§Ù‚Ù„ Û´ Ø¨Ø§Ø²ÛŒÚ©Ù† Ù„Ø§Ø²Ù… Ø§Ø³Øª.',
  tooManyPlayers: 'âš ï¸ Ø­Ø¯Ø§Ú©Ø«Ø± Û±Û° Ø¨Ø§Ø²ÛŒÚ©Ù† Ù…Ø¬Ø§Ø² Ø§Ø³Øª.',
  gameNotDay: 'âš ï¸ Ø§Ù„Ø§Ù† ÙØ§Ø² Ø±ÙˆØ² Ù†ÛŒØ³Øª.',
  gameNotLobby: 'âš ï¸ Ø¨Ø§Ø²ÛŒ Ù‚Ø¨Ù„Ø§Ù‹ Ø´Ø±ÙˆØ¹ Ø´Ø¯Ù‡.',
  alreadyActed: 'âš ï¸ Ø´Ù…Ø§ Ø¯Ø± Ø§ÛŒÙ† Ø±Ø§Ù†Ø¯ Ù‚Ø¨Ù„Ø§Ù‹ Ø§Ù‚Ø¯Ø§Ù… Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯.',

  teamDM: (team) =>
    `ðŸ´â€â˜ ï¸ *Ø¬Ø²ÛŒØ±Ù‡â€ŒÛŒ Ú¯Ù†Ø¬*\n\n` +
    `Ø´Ù…Ø§ ${TEAM_NAMES[team]} Ù‡Ø³ØªÛŒØ¯!\n` +
    `Ø´Ù…Ø§ Ø¨Ø§ ØªÛŒÙ… ${TEAM_NAMES[team]}â€ŒÙ‡Ø§ Ù‡Ù…Ú©Ø§Ø±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ ØªØ§ Ú¯Ù†Ø¬â€ŒÙ‡Ø§ÛŒ Ú©Ø´ØªÛŒâ€ŒÙ‡Ø§ Ø±Ø§ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ú©Ù†ÛŒØ¯ Ùˆ Ø¯Ø± Ù†Ù‡Ø§ÛŒØª Ø¨Ø±Ù†Ø¯Ù‡ Ø´ÙˆÛŒØ¯.\n\n` +
    `Ø´Ø±Ø§ÛŒØ· Ø¨Ø±Ø¯ Ø´Ù…Ø§:\n` +
    `â€¢ Ø§Ú¯Ø± ØªÛŒÙ… Ø´Ù…Ø§ Ø¯Ø± Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ Ú¯Ù†Ø¬ Ø¨ÛŒØ´ØªØ±ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŒ ØªÛŒÙ… Ø´Ù…Ø§ Ø¨Ø±Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.\n` +
    `â€¢ Ø§Ú¯Ø± Ø­Ø§Ú©Ù… Ø¬Ø²ÛŒØ±Ù‡ Ø¨Ø§Ø´ÛŒØ¯ Ùˆ Ø¨Ø§Ø²ÛŒ Ù…Ø³Ø§ÙˆÛŒ Ø´ÙˆØ¯ØŒ ØªÛŒÙ… Ø´Ù…Ø§ Ø¨Ø±Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.`,

  dutchDM: (mistMode) =>
    'ðŸ´â€â˜ ï¸ *Ø¬Ø²ÛŒØ±Ù‡â€ŒÛŒ Ú¯Ù†Ø¬*\n\n' +
    'Ø´Ù…Ø§ *ðŸ‡³ðŸ‡± Ù‡Ù„Ù†Ø¯ÛŒ* Ù‡Ø³ØªÛŒØ¯!\n' +
    'Ø´Ù…Ø§ Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ù‡ÛŒÚ† ØªÛŒÙ…ÛŒ Ù†ÛŒØ³ØªÛŒØ¯.\n\n' +
    '*Ø´Ø±Ø§ÛŒØ· Ø¨Ø±Ø¯ Ø´Ù…Ø§:*\n' +
    'â€¢ Ø§Ú¯Ø± Ø¯Ø± Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ Ù†Ø§Ø®Ø¯Ø§ÛŒ Ú©Ø´ØªÛŒâ€ŒØ§ÛŒ Ø¨Ø§Ø´ÛŒØ¯ Ú©Ù‡ Ú¯Ù†Ø¬ Ø¨ÛŒØ´ØªØ±ÛŒ Ø¯Ø§Ø±Ø¯ØŒ Ø¨Ù‡â€ŒØªÙ†Ù‡Ø§ÛŒÛŒ Ø¨Ø±Ù†Ø¯Ù‡â€ŒØ§ÛŒØ¯.\n' +
    'â€¢ Ø§Ú¯Ø± Ø­Ø§Ú©Ù… Ø¬Ø²ÛŒØ±Ù‡ Ø¨Ø§Ø´ÛŒØ¯ Ùˆ Ø¨Ø§Ø²ÛŒ Ù…Ø³Ø§ÙˆÛŒ Ø´ÙˆØ¯ØŒ Ø¨Ù‡â€ŒØªÙ†Ù‡Ø§ÛŒÛŒ Ø¨Ø±Ù†Ø¯Ù‡â€ŒØ§ÛŒØ¯.\n\n' +
    !mistMode?'âš ï¸ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª: Ù‡Ù„Ù†Ø¯ÛŒ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¯Ø± Ù…Ù†Ø§Ø²Ø¹Ù‡ Ø¬Ø²ÛŒØ±Ù‡ Ø¨Ø±Ù†Ø¯Ù‡ Ø´ÙˆØ¯.':'',

  spanishDM: (mistMode) =>
    'ðŸ´â€â˜ ï¸ *Ø¬Ø²ÛŒØ±Ù‡â€ŒÛŒ Ú¯Ù†Ø¬*\n\n' +
    'Ø´Ù…Ø§ *ðŸ‡ªðŸ‡¸ Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ÛŒÛŒ* Ù‡Ø³ØªÛŒØ¯!\n' +
    'Ø´Ù…Ø§ Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ù‡ÛŒÚ† ØªÛŒÙ…ÛŒ Ù†ÛŒØ³ØªÛŒØ¯.\n\n' +
    '*Ø´Ø±Ø§ÛŒØ· Ø¨Ø±Ø¯ Ø´Ù…Ø§:*\n' +
    'â€¢ Ø§Ú¯Ø± Ø¯Ø± Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ Ú©Ø´ØªÛŒ Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ÛŒÛŒ Ø­Ø¯Ø§Ù‚Ù„ Û² Ú¯Ù†Ø¬ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŒ Ù…Ø³ØªÙ‚Ù„ Ø§Ø² Ø¨Ù‚ÛŒÙ‡ Ø¨Ø±Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÛŒØ¯.\n' +
    'â€¢ Ø§Ú¯Ø± Ø­Ø§Ú©Ù… Ø¬Ø²ÛŒØ±Ù‡ Ø¨Ø§Ø´ÛŒØ¯ Ùˆ Ø¨Ø§Ø²ÛŒ Ù…Ø³Ø§ÙˆÛŒ Ø´ÙˆØ¯ØŒ Ø¨Ù‡â€ŒØªÙ†Ù‡Ø§ÛŒÛŒ Ø¨Ø±Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÛŒØ¯.\n\n' +
    !mistMode? 'âš ï¸ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª: Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ÛŒÛŒ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¯Ø± Ù…Ù†Ø§Ø²Ø¹Ù‡ Ø¬Ø²ÛŒØ±Ù‡ Ø¨Ø±Ù†Ø¯Ù‡ Ø´ÙˆØ¯.':'',

  gameStarted: (placements) =>
    `ðŸ´â€â˜ ï¸ *Ø¨Ø§Ø²ÛŒ Ø´Ø±ÙˆØ¹ Ø´Ø¯!*\n\nðŸ“ *Ø¬Ø§ÛŒÚ¯Ø§Ù‡ Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù†:*\n${placements}\n\n` +
    `Ù†Ø§Ø®Ø¯Ø§Ù‡Ø§ Ø¨Ø§ÛŒØ¯ Ú¯Ù†Ø¬ Ø§ÙˆÙ„ÛŒÙ‡â€ŒÛŒ Ú©Ø´ØªÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¬Ø§Ú¯Ø°Ø§Ø±ÛŒ Ú©Ù†Ù†Ø¯.`,

  captainChooseTreasure: (ship) =>
    `âš“ Ø´Ù…Ø§ Ù†Ø§Ø®Ø¯Ø§ÛŒ ${shipLabel(ship)} Ù‡Ø³ØªÛŒØ¯.\nÚ¯Ù†Ø¬ Ø§ÙˆÙ„ÛŒÙ‡â€ŒÛŒ Ú©Ø´ØªÛŒ Ø±Ø§ Ø¯Ø± Ú©Ø¯Ø§Ù… Ø§Ù†Ø¨Ø§Ø± Ù…ÛŒâ€ŒÚ¯Ø°Ø§Ø±ÛŒØ¯ØŸ`,

  treasurePlaced: (ship, hold, mistMode) =>
    `âœ… Ú¯Ù†Ø¬ Ø§ÙˆÙ„ÛŒÙ‡â€ŒÛŒ ${shipLabel(ship)} Ø¯Ø± Ø§Ù†Ø¨Ø§Ø± ${mistMode? "": TEAM_NAMES[hold]} Ù‚Ø±Ø§Ø± Ú¯Ø±ÙØª.`,

  dayStart: (round, mistMode = false) =>
    `â˜€ï¸ *Ø±Ø§Ù†Ø¯ ${round.toLocaleString("fa-IR")} - ÙØ§Ø² Ø±ÙˆØ²*\n\n` +
    `*Ø§Ù‚Ø¯Ø§Ù…Ø§Øª:*\n` +
    `/jump - Ø­Ø±Ú©Øª Ø¨Ù‡ Ù…Ú©Ø§Ù† Ø¯ÛŒÚ¯Ø±\n` +
    `/attack - Ø¯Ø³ØªÙˆØ± Ø­Ù…Ù„Ù‡ (Ù†Ø§Ø®Ø¯Ø§)\n` +
    `/maroon - ÙØ±Ø³ØªØ§Ø¯Ù† Ø¨Ù‡ Ø®Ø´Ú©ÛŒ (Ù†Ø§Ø®Ø¯Ø§)\n` +
    `/mutiny - Ø´ÙˆØ±Ø´ (Ù…Ø¹Ø§ÙˆÙ†)\n` +
    (mistMode ? `/inspect - Ø¨Ø±Ø±Ø³ÛŒ Ø§Ù†Ø¨Ø§Ø± (Ù…Ø¹Ø§ÙˆÙ†)\n` : ``) +
    `/replace - Ø¬Ø§Ø¨Ù‡â€ŒØ¬Ø§ÛŒÛŒ Ú¯Ù†Ø¬ (Ù¾Ø§Ø¯Ùˆ)\n` +
    `/dispute - Ù…Ù†Ø§Ø²Ø¹Ù‡ (Ø¬Ø²ÛŒØ±Ù‡)\n` +
    `/callarmada - Ø®Ø¨Ø± Ú©Ø±Ø¯Ù† Ù†Ø§ÙˆÚ¯Ø§Ù† (Ø­Ø§Ú©Ù…ØŒ Ø±Ø§Ù†Ø¯ Û¶+)\n` +
    `/pass - Ù¾Ø§Ø³ (Ø¨Ø¯ÙˆÙ† Ø§Ù‚Ø¯Ø§Ù…)\n` +
    `/status - ÙˆØ¶Ø¹ÛŒØª Ø¨Ø§Ø²ÛŒ`,

  boardedRowboat: (name) => `ðŸš£ â€${name} Ø³ÙˆØ§Ø± Ù‚Ø§ÛŒÙ‚ Ø´Ø¯.`,
  alreadyOnRowboat: 'âš ï¸ Ø´Ù…Ø§ Ø³ÙˆØ§Ø± Ù‚Ø§ÛŒÙ‚ Ù‡Ø³ØªÛŒØ¯.',
  notOnRowboat: 'âš ï¸ Ø´Ù…Ø§ Ø³ÙˆØ§Ø± Ù‚Ø§ÛŒÙ‚ Ù†ÛŒØ³ØªÛŒØ¯.',
  disembarked: (name, loc) => `ðŸ“ â€${name} Ø¨Ù‡ ${shipLabel(loc)} Ø±ÙØª.`,
  movedTo: (name, loc) => `ðŸ“ â€${name} Ø¨Ù‡ ${shipLabel(loc)} Ø­Ø±Ú©Øª Ú©Ø±Ø¯.`,
  locationFull: (loc) => `âš ï¸ ${shipLabel(loc)} Ø¬Ø§ Ù†Ø¯Ø§Ø±Ø¯.`,
  chooseMoveDest: 'ðŸ“ Ø¨Ù‡ Ú©Ø¬Ø§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø­Ø±Ú©Øª Ú©Ù†ÛŒØ¯ØŸ',
  cannotReturnToExpelled: 'âš ï¸ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ù‡ Ù…Ú©Ø§Ù†ÛŒ Ú©Ù‡ Ø§Ø² Ø¢Ù† Ø§Ø®Ø±Ø§Ø¬ Ø´Ø¯Ù‡â€ŒØ§ÛŒØ¯ Ø¨Ø±Ú¯Ø±Ø¯ÛŒØ¯.',
  noValidMoveDestinations: 'âš ï¸ Ù‡ÛŒÚ† Ù…Ù‚ØµØ¯ Ù…Ø¹ØªØ¨Ø±ÛŒ Ø¨Ø±Ø§ÛŒ Ø­Ø±Ú©Øª ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.',
  notValidForMove: 'âš ï¸ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ø§ÛŒÙ† Ù…Ú©Ø§Ù† Ø­Ø±Ú©Øª Ú©Ù†ÛŒØ¯.',

  notCaptain: 'âš ï¸ ÙÙ‚Ø· Ù†Ø§Ø®Ø¯Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø§ÛŒÙ† Ú©Ø§Ø± Ø±Ø§ Ú©Ù†Ø¯.',
  notFirstMate: 'âš ï¸ ÙÙ‚Ø· Ù…Ø¹Ø§ÙˆÙ† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø§ÛŒÙ† Ú©Ø§Ø± Ø±Ø§ Ú©Ù†Ø¯.',
  notCaptainOrFirstMate: 'âš ï¸ ÙÙ‚Ø· Ù†Ø§Ø®Ø¯Ø§ ÛŒØ§ Ù…Ø¹Ø§ÙˆÙ† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø§ÛŒÙ† Ú©Ø§Ø± Ø±Ø§ Ú©Ù†Ø¯.',
  notCabinBoy: 'âš ï¸ ÙÙ‚Ø· Ù¾Ø§Ø¯Ùˆ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø§ÛŒÙ† Ú©Ø§Ø± Ø±Ø§ Ú©Ù†Ø¯.',
  notOnShip: 'âš ï¸ Ø´Ù…Ø§ Ø¯Ø± Ú©Ø´ØªÛŒâ€Œ Ù†ÛŒØ³ØªÛŒØ¯.',
  notOnIsland: 'âš ï¸ Ø´Ù…Ø§ Ø¯Ø± Ø¬Ø²ÛŒØ±Ù‡ Ù†ÛŒØ³ØªÛŒØ¯.',
  notGovernor: 'âš ï¸ ÙÙ‚Ø· Ø­Ø§Ú©Ù… Ø¬Ø²ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø§ÛŒÙ† Ú©Ø§Ø± Ø±Ø§ Ú©Ù†Ø¯.',

  attackOrdered: (name, ship) =>
    `âš”ï¸ â€${name} (Ù†Ø§Ø®Ø¯Ø§ÛŒ ${shipLabel(ship)}) Ø¯Ø³ØªÙˆØ± Ø­Ù…Ù„Ù‡ Ø¯Ø§Ø¯!`,
  noTreasureToSteal: 'âš ï¸ Ú©Ø´ØªÛŒ Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ÛŒÛŒ Ú¯Ù†Ø¬ÛŒ Ù†Ø¯Ø§Ø±Ø¯.',
  attackAlreadyPending: 'âš ï¸ ÛŒÚ© Ø±Ø§ÛŒâ€ŒÚ¯ÛŒØ±ÛŒ Ù‚Ø¨Ù„Ø§Ù‹ Ø¯Ø± Ø¬Ø±ÛŒØ§Ù† Ø§Ø³Øª.',

  maroonPlayer: (captain, target, ship) =>
    `ðŸ â€${captain} (Ù†Ø§Ø®Ø¯Ø§ÛŒ ${shipLabel(ship)}) ${target} Ø±Ø§ Ø¨Ù‡ Ø¬Ø²ÛŒØ±Ù‡ ÙØ±Ø³ØªØ§Ø¯!`,
  maroonOrdered: (captain, target, ship) =>
    `ðŸ´â€â˜ ï¸ â€${captain} (Ù†Ø§Ø®Ø¯Ø§ÛŒ ${shipLabel(ship)}) Ø¯Ø³ØªÙˆØ± Ø§Ø®Ø±Ø§Ø¬ ${target} Ø±Ø§ Ø¯Ø§Ø¯!`,
  cantMaroonSelf: 'âš ï¸ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø®ÙˆØ¯ØªØ§Ù† Ø±Ø§ Ø¨Ù‡ Ø®Ø´Ú©ÛŒ Ø¨ÙØ±Ø³ØªÛŒØ¯.',
  playerNotOnShip: 'âš ï¸ Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒÚ©Ù† Ø¯Ø± Ú©Ø´ØªÛŒ Ø´Ù…Ø§ Ù†ÛŒØ³Øª.',
  captainAlreadyActed: 'âš ï¸ Ù†Ø§Ø®Ø¯Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø§Ù‚Ø¯Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±Ø¯Ù‡. (ÙÙ‚Ø· ÛŒÚ©ÛŒ Ø§Ø² Ø­Ù…Ù„Ù‡ ÛŒØ§ Ø§Ø®Ø±Ø§Ø¬)',
  mutinyAlreadyPending: 'âš ï¸ Ø¯Ø± Ø§ÛŒÙ† Ø±Ø§Ù†Ø¯ Ù‚Ø¨Ù„Ø§Ù‹ Ø´ÙˆØ±Ø´ Ø§Ø¹Ù„Ø§Ù… Ø´Ø¯Ù‡.',
  captainActionCancelledByMutiny: (ship) =>
    `âš”ï¸ Ø§Ù‚Ø¯Ø§Ù… Ù†Ø§Ø®Ø¯Ø§ÛŒ ${shipLabel(ship)} Ù„ØºÙˆ Ø´Ø¯ â€” Ø´ÙˆØ±Ø´ Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯!`,

  mutinyStarted: (name, ship) =>
    `âš”ï¸ â€${name} (Ù…Ø¹Ø§ÙˆÙ† ${shipLabel(ship)}) Ø´ÙˆØ±Ø´ Ø¨Ù‡â€ŒÙ¾Ø§ Ú©Ø±Ø¯!`,
  cantLeaveWithMutiny: 'âš ï¸ Ø§ÛŒÙ† Ø§Ù‚Ø¯Ø§Ù… Ø¨Ø§Ø¹Ø« Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø´Ù…Ø§ Ø´ÙˆØ±Ø´ Ø±Ø§ Ø¨Ø¨Ø§Ø²ÛŒØ¯ (Ø§Ú¯Ø± Ø­Ø±Ú©Øª Ú©Ù†ÛŒØ¯ØŒ Ø´ÙˆØ±Ø´ Ù…ÙˆÙÙ‚ Ø§Ø³Øª)!',
  captainLeftDuringMutiny: (name, ship) =>
    `âš”ï¸ Ù†Ø§Ø®Ø¯Ø§ÛŒ ${shipLabel(ship)} (â€${name}) Ø¯Ø± Ø²Ù…Ø§Ù† Ø´ÙˆØ±Ø´ Ú©Ø´ØªÛŒ Ø±Ø§ ØªØ±Ú© Ú©Ø±Ø¯!\nâœ… *Ø´ÙˆØ±Ø´ Ù…ÙˆÙÙ‚ Ø´Ø¯* Ùˆ Ù†Ø§Ø®Ø¯Ø§ Ø¯Ø± Ø±Ø§Ù†Ø¯ Ø¨Ø¹Ø¯ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Ø§ÛŒÙ† Ú©Ø´ØªÛŒ Ø¨Ø±Ú¯Ø±Ø¯Ø¯.`,
  mutinyAutoSucceeded: (ship) =>
    `âœ… Ø´ÙˆØ±Ø´ Ø¹Ù„ÛŒÙ‡ Ù†Ø§Ø®Ø¯Ø§ÛŒ ${shipLabel(ship)} Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯ (Ù†Ø§Ø®Ø¯Ø§ Ú©Ø´ØªÛŒ Ø±Ø§ ØªØ±Ú© Ú©Ø±Ø¯).`,

  treasureMoved: (name, ship, hold) =>
    `ðŸ’° â€${name} (Ù¾Ø§Ø¯ÙˆÛŒ ${shipLabel(ship)}) ÛŒÚ© Ú¯Ù†Ø¬ Ø¨Ù‡ Ø§Ù†Ø¨Ø§Ø± ${TEAM_NAMES[hold]} Ù…Ù†ØªÙ‚Ù„ Ú©Ø±Ø¯.`,
  noTreasureToMove: (hold) => `âš ï¸ Ø§Ù†Ø¨Ø§Ø± ${TEAM_NAMES[hold]} Ø®Ø§Ù„ÛŒ Ø§Ø³Øª.`,
  cabinBoyBlockedByAttack: 'âš ï¸ Ù¾Ø§Ø¯Ùˆ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ù¾Ø³ Ø§Ø² Ø­Ù…Ù„Ù‡â€ŒÛŒ Ù…ÙˆÙÙ‚ Ú¯Ù†Ø¬ Ø¬Ø§Ø¨Ù‡â€ŒØ¬Ø§ Ú©Ù†Ø¯!',
  
  chooseMoveDirection: 'ðŸŒ«ï¸ Ø¬Ù‡Øª Ø¬Ø§Ø¨Ù‡â€ŒØ¬Ø§ÛŒÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:',
  treasureMovedSuccess: (hold) => `âœ… ÛŒÚ© Ú¯Ù†Ø¬ Ø¨Ù‡ Ø§Ù†Ø¨Ø§Ø± ${TEAM_NAMES[hold]} Ù…Ù†ØªÙ‚Ù„ Ø´Ø¯.`,
  treasureMovedFailed: `âŒ Ù‡ÛŒÚ† Ú¯Ù†Ø¬ÛŒ Ø¨Ø±Ø§ÛŒ Ø¬Ø§Ø¨Ù‡â€ŒØ¬Ø§ÛŒÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª.`,
  treasureMoveAttempt: (name, ship, direction) =>
    `ðŸ’° â€${name} (Ù¾Ø§Ø¯ÙˆÛŒ ${shipLabel(ship)}) ØªÙ„Ø§Ø´ Ú©Ø±Ø¯ Ú¯Ù†Ø¬ÛŒ Ø±Ø§ Ù…Ù†ØªÙ‚Ù„ Ú©Ù†Ø¯.`,

  inspectOrdered: (name, ship) =>
    `ðŸ” â€${name} (Ù…Ø¹Ø§ÙˆÙ† ${shipLabel(ship)}) Ø§Ù†Ø¨Ø§Ø± Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø±Ø¯.`,
  inspectNotInMistMode: 'âš ï¸ Ø¨Ø±Ø±Ø³ÛŒ Ø§Ù†Ø¨Ø§Ø± ÙÙ‚Ø· Ø¯Ø± Ù…Ù‡â€ŒÚ¯Ø±ÙØªÚ¯ÛŒ Ù…Ù…Ú©Ù† Ø§Ø³Øª.',
  alreadyActedAsFirstMate: 'âš ï¸ Ù…Ø¹Ø§ÙˆÙ† Ù‚Ø¨Ù„Ø§Ù‹ Ø¯Ø± Ø§ÛŒÙ† Ø±Ø§Ù†Ø¯ Ø§Ù‚Ø¯Ø§Ù… Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª (ÛŒÚ© Ø§Ù‚Ø¯Ø§Ù… Ø¨Ø±Ø§ÛŒ Ù…Ø¹Ø§ÙˆÙ† Ù…Ø¬Ø§Ø² Ø§Ø³Øª).',

  armadaCalled: (name) =>
    `ðŸš¨ â€${name} (Ø­Ø§Ú©Ù… Ø¬Ø²ÛŒØ±Ù‡) Ù†Ø§ÙˆÚ¯Ø§Ù† Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ Ø±Ø§ Ø®Ø¨Ø± Ú©Ø±Ø¯!\nØ¨Ø§Ø²ÛŒ Ø¨Ø¹Ø¯ Ø§Ø² ÙØ§Ø² Ø´Ø¨ Ø§Ù…Ø´Ø¨ ØªÙ…Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯.`,
  tooEarlyForArmada: 'âš ï¸ Ø®Ø¨Ø± Ú©Ø±Ø¯Ù† Ù†Ø§ÙˆÚ¯Ø§Ù† Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ Ø§Ø² Ø±Ø§Ù†Ø¯ Û¶ Ø¨Ù‡ Ø¨Ø¹Ø¯ Ù…Ù…Ú©Ù† Ø§Ø³Øª.',

  disputeStarted: (name) =>
    `âš–ï¸ â€${name} Ù…Ù†Ø§Ø²Ø¹Ù‡ Ø¨Ø± Ø³Ø± Ú¯Ù†Ø¬â€ŒÙ‡Ø§ÛŒ Ø¬Ø²ÛŒØ±Ù‡ Ø¨Ù‡â€ŒÙ¾Ø§ Ú©Ø±Ø¯!`,
  disputeAlreadyPending: 'âš ï¸ Ø¯Ø± Ø§ÛŒÙ† Ø±Ø§Ù†Ø¯ Ù‚Ø¨Ù„Ø§Ù‹ Ù…Ù†Ø§Ø²Ø¹Ù‡ Ø´Ø¯Ù‡.',

  passed: (name) => `â­ â€${name} Ù¾Ø§Ø³ Ø¯Ø§Ø¯. (Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ø§ ÛŒÚ© Ø§Ù‚Ø¯Ø§Ù… Ø¯ÛŒÚ¯Ø± Ø¢Ù† Ø±Ø§ Ù„ØºÙˆ Ú©Ù†Ø¯)`,
  alreadyPassed: 'âš ï¸ Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ù¾Ø§Ø³ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒØ¯. Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø§ ÛŒÚ© Ø§Ù‚Ø¯Ø§Ù… Ø¯ÛŒÚ¯Ø± Ø¢Ù† Ø±Ø§ Ù„ØºÙˆ Ú©Ù†ÛŒØ¯.',

  nightStart: 'ðŸŒ™ *ÙØ§Ø² Ø´Ø¨*\nØ±Ø§ÛŒâ€ŒÚ¯ÛŒØ±ÛŒ Ù…Ø®ÙÛŒØ§Ù†Ù‡ Ø´Ø±ÙˆØ¹ Ø´Ø¯.',
  noEventsAtNight:
    'ðŸŒ™ *ÙØ§Ø² Ø´Ø¨*\nÙ‡ÛŒÚ† Ø±Ø§ÛŒâ€ŒÚ¯ÛŒØ±ÛŒâ€ŒØ§ÛŒ Ù†ÛŒØ³Øª. ØµØ¨Ø­ Ù…ÛŒâ€ŒØ´ÙˆØ¯...',

  voteAttackDM: `âš”ï¸ *Ø±Ø§ÛŒâ€ŒÚ¯ÛŒØ±ÛŒ Ø­Ù…Ù„Ù‡*

Ø´Ø±Ø§ÛŒØ· Ù…ÙˆÙÙ‚ÛŒØª:
âœ“ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Û± Ø±Ø£ÛŒ ÛŒÙˆØ±Ø´
âœ“ Ø±Ø£ÛŒâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù…ÙˆØ´ Ø¨ÛŒØ´ØªØ± Ø§Ø² Û± Ù†Ø¨Ø§Ø´Ø¯
âœ“ Ø­Ø¯Ø§Ù‚Ù„ Û± Ø±Ø£ÛŒ Ø¢ØªØ´ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯

Ø±Ø§ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:`,
  voteMutinyDM: 'âš”ï¸ *Ø±Ø§ÛŒâ€ŒÚ¯ÛŒØ±ÛŒ Ø´ÙˆØ±Ø´*\nØ±Ø§ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:',
  voteDisputeDM: 'âš–ï¸ *Ø±Ø§ÛŒâ€ŒÚ¯ÛŒØ±ÛŒ Ù…Ù†Ø§Ø²Ø¹Ù‡*\nØ±Ø§ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:',

  voteRecorded: 'âœ… Ø±Ø§ÛŒ Ø´Ù…Ø§ Ø«Ø¨Øª Ø´Ø¯.',
  alreadyVoted: 'âš ï¸ Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø±Ø§ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒØ¯.',

  attackResult: (success, charges, fires, waters, ship) =>
    `âš”ï¸ *Ù†ØªÛŒØ¬Ù‡â€ŒÛŒ Ø­Ù…Ù„Ù‡* (${shipLabel(ship)}): ${success ? 'âœ… Ù…ÙˆÙÙ‚!' : 'âŒ Ù†Ø§Ù…ÙˆÙÙ‚!'}\n` +
    `ÛŒÙˆØ±Ø´: ${charges.toLocaleString("fa-IR")} | Ø¢ØªØ´: ${fires.toLocaleString("fa-IR")} | Ø®Ø§Ù…ÙˆØ´: ${waters.toLocaleString("fa-IR")}`,

  captainChooseHold: 'ðŸ’° Ø­Ù…Ù„Ù‡ Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯! Ú¯Ù†Ø¬ Ø±Ø§ Ø¯Ø± Ú©Ø¯Ø§Ù… Ø§Ù†Ø¨Ø§Ø± Ø¨Ú¯Ø°Ø§Ø±ÛŒÙ…ØŸ',

  treasureCaptured: (ship, hold) =>
    `ðŸ’° ÛŒÚ© Ú¯Ù†Ø¬ Ø§Ø² Ú©Ø´ØªÛŒ Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ÛŒÛŒ Ø¯Ø²Ø¯ÛŒØ¯Ù‡ Ø´Ø¯ Ùˆ Ø¯Ø± Ø§Ù†Ø¨Ø§Ø± ${TEAM_NAMES[hold]} ${shipLabel(ship)} Ù‚Ø±Ø§Ø± Ú¯Ø±ÙØª!`,
  treasureCapturedMistMode: (ship) =>
    `ðŸ’° ÛŒÚ© Ú¯Ù†Ø¬ Ø§Ø² Ú©Ø´ØªÛŒ Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ÛŒÛŒ Ø¯Ø²Ø¯ÛŒØ¯Ù‡ Ø´Ø¯ Ùˆ Ø¯Ø± ${shipLabel(ship)} Ù‚Ø±Ø§Ø± Ú¯Ø±ÙØª! (ðŸŒ«ï¸ Ù…Ù‡â€ŒÚ¯Ø±ÙØªÚ¯ÛŒØŒ Ø§Ù†Ø¨Ø§Ø± Ù…Ø´Ø®Øµ Ù†ÛŒØ³Øª)`,

  mutinyResult: (success, forV, against, ship) =>
    `âš”ï¸ *Ù†ØªÛŒØ¬Ù‡â€ŒÛŒ Ø´ÙˆØ±Ø´* (${shipLabel(ship)}): ${success ? 'âœ… Ù…ÙˆÙÙ‚! Ù†Ø§Ø®Ø¯Ø§ Ø¹Ø²Ù„ Ø´Ø¯.' : 'âŒ Ù†Ø§Ù…ÙˆÙÙ‚!'}\n` +
    `Ù…ÙˆØ§ÙÙ‚: ${forV.toLocaleString("fa-IR")} | Ù…Ø®Ø§Ù„Ù: ${against.toLocaleString("fa-IR")}`,

  disputeResult: (engVotes, frVotes) => {
    let result;
    if (engVotes > frVotes) result = 'Ù‡Ø± Ø¯Ùˆ Ú¯Ù†Ø¬ Ø¨Ù‡ Ù†Ø§Ø­ÛŒÙ‡â€ŒÛŒ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ø±ÙØª.';
    else if (frVotes > engVotes) result = 'Ù‡Ø± Ø¯Ùˆ Ú¯Ù†Ø¬ Ø¨Ù‡ Ù†Ø§Ø­ÛŒÙ‡â€ŒÛŒ ÙØ±Ø§Ù†Ø³ÙˆÛŒ Ø±ÙØª.';
    else result = 'Ù…Ø³Ø§ÙˆÛŒ! Ù‡Ø± Ù†Ø§Ø­ÛŒÙ‡ ÛŒÚ© Ú¯Ù†Ø¬ Ú¯Ø±ÙØª.';
    return `âš–ï¸ *Ù†ØªÛŒØ¬Ù‡â€ŒÛŒ Ù…Ù†Ø§Ø²Ø¹Ù‡:*\nðŸ‡¬ðŸ‡§ Ø§Ù†Ú¯Ù„ÛŒØ³: ${engVotes.toLocaleString("fa-IR")} | ðŸ‡«ðŸ‡· ÙØ±Ø§Ù†Ø³Ù‡: ${frVotes.toLocaleString("fa-IR")}\n${result}`;
  },

  governorDeposed: (name) =>
    `ðŸ‘‘ â€${name} (Ø­Ø§Ú©Ù… Ø¬Ø²ÛŒØ±Ù‡) Ø§Ø² Ø­Ú©ÙˆÙ…Øª Ø®Ù„Ø¹ Ø´Ø¯ Ùˆ Ø¨Ù‡ Ø¢Ø®Ø±ÛŒÙ† Ø±ØªØ¨Ù‡ Ø¬Ø²ÛŒØ±Ù‡ Ø±ÙØª.`,

  gameEnd: 'ðŸ *Ø¨Ø§Ø²ÛŒ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯!*\nÙ†Ø§ÙˆÚ¯Ø§Ù† Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ Ø±Ø³ÛŒØ¯.',

  finalScores: (engTotal, frTotal, winner, governorTeam) => {
    let winText;
    if (engTotal === frTotal) {
      winText = `Ù…Ø³Ø§ÙˆÛŒ! Ø­Ø§Ú©Ù… Ø¬Ø²ÛŒØ±Ù‡ ${TEAM_NAMES[governorTeam]} Ø§Ø³ØªØŒ Ù¾Ø³ ØªÛŒÙ… ${TEAM_NAMES[governorTeam]} Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯!`;
    } else {
      winText = `ØªÛŒÙ… ${TEAM_NAMES[winner]} Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯!`;
    }
    return (
      `ðŸ† *Ù†ØªØ§ÛŒØ¬ Ù†Ù‡Ø§ÛŒÛŒ:*\n` +
      `ðŸ‡¬ðŸ‡§ Ø§Ù†Ú¯Ù„ÛŒØ³: ${engTotal.toLocaleString("fa-IR")} Ú¯Ù†Ø¬\n` +
      `ðŸ‡«ðŸ‡· ÙØ±Ø§Ù†Ø³Ù‡: ${frTotal.toLocaleString("fa-IR")} Ú¯Ù†Ø¬\n\n` +
      `${winText}`
    );
  },

  dutchResult: (won, reason) =>
    won
      ? `ðŸ‡³ðŸ‡± Ø¨Ø§Ø²ÛŒÚ©Ù† Ù‡Ù„Ù†Ø¯ÛŒ Ù†ÛŒØ² *Ø¨Ø±Ù†Ø¯Ù‡* Ø´Ø¯! (${reason})`
      : `ðŸ‡³ðŸ‡± Ø¨Ø§Ø²ÛŒÚ©Ù† Ù‡Ù„Ù†Ø¯ÛŒ *Ø¨Ø§Ø²Ù†Ø¯Ù‡* Ø´Ø¯.`,

  spanishResult: (won, reason) =>
    won
      ? `ðŸ‡ªðŸ‡¸ Ø¨Ø§Ø²ÛŒÚ©Ù† Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ÛŒÛŒ Ù†ÛŒØ² *Ø¨Ø±Ù†Ø¯Ù‡* Ø´Ø¯! (${reason})`
      : `ðŸ‡ªðŸ‡¸ Ø¨Ø§Ø²ÛŒÚ©Ù† Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ÛŒÛŒ *Ø¨Ø§Ø²Ù†Ø¯Ù‡* Ø´Ø¯.`,

  status: (state) => {
    const lines = [`ðŸ“Š *ÙˆØ¶Ø¹ÛŒØª Ø¨Ø§Ø²ÛŒ - Ø±Ø§Ù†Ø¯ ${state.round.toLocaleString("fa-IR")}*`];
    if (state.mistMode) lines.push('ðŸŒ«ï¸ *Ù…Ù‡â€ŒÚ¯Ø±ÙØªÚ¯ÛŒ*');
    lines.push('');

    lines.push(`*${LOCATION_NAMES.flyingDutchman}:*`);
    lines.push(formatShipStatus(state, 'flyingDutchman'));
    lines.push('');
    lines.push(`*${LOCATION_NAMES.jollyRoger}:*`);
    lines.push(formatShipStatus(state, 'jollyRoger'));
    lines.push('');
    lines.push(`*${LOCATION_NAMES.island}:*`);
    lines.push(formatIslandStatus(state));
    lines.push('');
    lines.push(`*ðŸš¢ Ú©Ø´ØªÛŒ Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ÛŒÛŒ:* ${state.locations.spanishShip.treasures.toLocaleString("fa-IR")} Ú¯Ù†Ø¬`);

    return lines.join('\n');
  },

  dmCheckOk: 'âœ… Ø´Ù…Ø§ Ø¨Ù‡ Ø¨Ø§Ø²ÛŒ Ø¬Ø²ÛŒØ±Ù‡â€ŒÛŒ Ú¯Ù†Ø¬ Ù¾ÛŒÙˆØ³ØªÛŒØ¯! Ù…Ù†ØªØ¸Ø± Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ø¨Ø§Ø´ÛŒØ¯.',
  dmRequired: (name) =>
    `âš ï¸ â€${name}ØŒ Ø§Ø¨ØªØ¯Ø§ Ø±Ø¨Ø§Øª Ø±Ø§ Ø¯Ø± Ù¾ÛŒØ§Ù… Ø®ØµÙˆØµÛŒ /start Ú©Ù†ÛŒØ¯ ØªØ§ Ø¨ØªÙˆØ§Ù†Ù… ØªÛŒÙ… Ø´Ù…Ø§ Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†Ù…. Ø³Ù¾Ø³ Ø¯ÙˆØ¨Ø§Ø±Ù‡ /join Ø¨Ø²Ù†ÛŒØ¯.`,

  playerNotFound: 'âš ï¸ Ø¨Ø§Ø²ÛŒÚ©Ù† Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯.',
  dmFailed: (name) => `âš ï¸ Ù†ØªÙˆØ§Ù†Ø³ØªÙ… Ø¨Ù‡ â€${name} Ù¾ÛŒØ§Ù… Ø®ØµÙˆØµÛŒ Ø¨ÙØ±Ø³ØªÙ…. Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ø±Ø¨Ø§Øª Ø±Ø§ Ø¯Ø± Ù¾ÛŒØ§Ù… Ø®ØµÙˆØµÛŒ /start Ú©Ù†ÛŒØ¯.`,
  chooseDisembark: 'ðŸ“ Ú©Ø¬Ø§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ù¾ÛŒØ§Ø¯Ù‡ Ø´ÙˆÛŒØ¯ØŸ',
  chooseMove: 'ðŸ’° Ú¯Ù†Ø¬ Ø±Ø§ Ø¨Ù‡ Ú©Ø¯Ø§Ù… Ø§Ù†Ø¨Ø§Ø± Ù…Ù†ØªÙ‚Ù„ Ú©Ù†ÛŒØ¯ØŸ',
  chooseMaroon: 'ðŸ Ú©Ø¯Ø§Ù… Ø®Ø¯Ù…Ù‡ Ø±Ø§ Ø¨Ù‡ Ø®Ø´Ú©ÛŒ Ø¨ÙØ±Ø³ØªÛŒØ¯ØŸ',
  onlyOneCrewCantMaroon: 'âš ï¸ ÙÙ‚Ø· ÛŒÚ© Ø®Ø¯Ù…Ù‡ Ø¯Ø± Ú©Ø´ØªÛŒ Ø§Ø³Øª Ùˆ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø®ÙˆØ¯ØªØ§Ù† Ø±Ø§ Ø¨Ù‡ Ø®Ø´Ú©ÛŒ Ø¨ÙØ±Ø³ØªÛŒØ¯.',
  notYourButton: 'âš ï¸ Ø§ÛŒÙ† Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ù†ÛŒØ³Øª.',

  allTreasureOnOneSide: (hold) =>
    `âš ï¸ ØªÙ…Ø§Ù… Ú¯Ù†Ø¬â€ŒÙ‡Ø§ Ù‡Ù…ÛŒÙ† Ø§Ù„Ø§Ù† Ø¯Ø± Ø§Ù†Ø¨Ø§Ø± ${TEAM_NAMES[hold]} Ø§Ø³Øª. Ú¯Ù†Ø¬ÛŒ Ø¨Ø±Ø§ÛŒ Ø¬Ø§Ø¨Ù‡â€ŒØ¬Ø§ÛŒÛŒ Ù†ÛŒØ³Øª.`,

  noSpanishTreasure: 'âš ï¸ Ú©Ø´ØªÛŒ Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ÛŒÛŒ Ø¯ÛŒÚ¯Ø± Ú¯Ù†Ø¬ÛŒ Ù†Ø¯Ø§Ø±Ø¯.',
  attackOtherShip: (otherShip) =>
    `âš”ï¸ Ú©Ø´ØªÛŒ Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ÛŒÛŒ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª. Ø­Ù…Ù„Ù‡ Ø¨Ù‡ ${shipLabel(otherShip)} Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯.`,
  chooseStealHold: 'ðŸ’° Ø§Ø² Ú©Ø¯Ø§Ù… Ø§Ù†Ø¨Ø§Ø± Ú©Ø´ØªÛŒ Ø¯Ø´Ù…Ù† Ø¨Ø¯Ø²Ø¯ÛŒØ¯ØŸ',

  attackCancelled: (ship) =>
    `âš”ï¸ Ø­Ù…Ù„Ù‡â€ŒÛŒ ${shipLabel(ship)} Ù„ØºÙˆ Ø´Ø¯ â€” Ø®Ø¯Ù…Ù‡â€ŒÛŒ Ú©Ø§ÙÛŒ Ø±ÙˆÛŒ Ú©Ø´ØªÛŒ Ù†ÛŒØ³Øª.`,
  mutinyCancelled: (ship) =>
    `âš”ï¸ Ø´ÙˆØ±Ø´ ${shipLabel(ship)} Ù„ØºÙˆ Ø´Ø¯ â€” Ø®Ø¯Ù…Ù‡â€ŒÛŒ Ú©Ø§ÙÛŒ ØºÛŒØ± Ø§Ø² Ù†Ø§Ø®Ø¯Ø§ Ø±ÙˆÛŒ Ú©Ø´ØªÛŒ Ù†ÛŒØ³Øª.`,
};

function formatShipStatus(state, shipKey) {
  const loc = state.locations[shipKey];
  const crewNames = loc.crew.map((id, i) => {
    const p = state.players.get(id);
    const hasSubmitted = state.usedAction.has(id) ? 'âœ…' : '';
    let role = '';
    if (i === 0) role = ' (Ù†Ø§Ø®Ø¯Ø§)';
    else if (i === 1 && loc.crew.length > 2) role = ' (Ù…Ø¹Ø§ÙˆÙ†)';
    if (i === loc.crew.length - 1 && loc.crew.length > 1) role = ' (Ù¾Ø§Ø¯Ùˆ)';
    if (loc.crew.length === 2 && i === 1) role = ' (Ù…Ø¹Ø§ÙˆÙ†/Ù¾Ø§Ø¯Ùˆ)';
    if (loc.crew.length === 1 && i === 0) role = ' (Ù†Ø§Ø®Ø¯Ø§/Ù¾Ø§Ø¯Ùˆ)';
    return `  ${(i + 1).toLocaleString("fa-IR")}. â€${p.name}${role} ${hasSubmitted}`;
  });
  
  let treasureLine;
  if (state.mistMode) {
    const total = loc.holds.english + loc.holds.french;
    treasureLine = `  ðŸ’° Ú©Ù„: ${total.toLocaleString("fa-IR")} Ú¯Ù†Ø¬ (ðŸŒ«ï¸)`;
  } else {
    treasureLine = `  ðŸ’° ðŸ‡¬ðŸ‡§: ${loc.holds.english.toLocaleString("fa-IR")} Ú¯Ù†Ø¬ | ðŸ‡«ðŸ‡·: ${loc.holds.french.toLocaleString("fa-IR")} Ú¯Ù†Ø¬`;
  }
  
  return (
    crewNames.join('\n') +
    (crewNames.length === 0 ? '  Ø®Ø§Ù„ÛŒ' : '') +
    '\n' + treasureLine
  );
}

function formatIslandStatus(state) {
  const loc = state.locations.island;
  const resNames = loc.residents.map((id, i) => {
    const p = state.players.get(id);
    const hasSubmitted = state.usedAction.has(id) ? 'âœ…' : '';
    let role = i === 0 ? ' (Ø­Ø§Ú©Ù…)' : '';
    return `  ${(i + 1).toLocaleString("fa-IR")}. â€${p.name}${role} ${hasSubmitted}`;
  });
  return (
    (resNames.length > 0 ? resNames.join('\n') : '  Ø®Ø§Ù„ÛŒ') +
    `\n  ðŸ’° ðŸ‡¬ðŸ‡§: ${loc.treasures.english.toLocaleString("fa-IR")} | ðŸ‡«ðŸ‡·: ${loc.treasures.french.toLocaleString("fa-IR")}`
  );
}

module.exports = { msg, TEAM_NAMES, LOCATION_NAMES, SHIP_SHORT, playerName, shipLabel };
